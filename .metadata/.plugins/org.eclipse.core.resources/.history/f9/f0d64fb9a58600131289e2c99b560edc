package com.example.AndroidYemekSepetiDb;

import android.app.Activity;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.view.View;
import android.widget.adapter2View;
import android.widget.adapter2View.OnItemClickListener;
import android.widget.ListView;
import android.widget.Simpleadapter2;

import com.example.VeriTabani.VeriTabanýSiparisler;

public class PanelSiparisler extends Activity {

	private Simpleadapter2 adapter22;
	private VeriTabanýSiparisler veritabaný;
	private SimpleCursoradapter2Class2 adapter2;
	private Cursor kelimeListesiCursor;

	private String[] projection = new String[] {
			VeriTabanýSiparisler.SIPARIS_ID, VeriTabanýSiparisler.KULLANICI_ID,
			VeriTabanýSiparisler.YEMEKLER, VeriTabanýSiparisler.ICECEKLER,
			VeriTabanýSiparisler.SALATALAR, VeriTabanýSiparisler.TATLILAR,
			VeriTabanýSiparisler.TOPLAM };

	// Database icindeki verileri ListView'e map ederken from ve to 'yu
	// kullanýyoruz .
	private String[] from = new String[] {
//			VeriTabanýSiparisler.SIPARIS_ID,
			VeriTabanýSiparisler.KULLANICI_ID,
			VeriTabanýSiparisler.YEMEKLER, VeriTabanýSiparisler.ICECEKLER,
			VeriTabanýSiparisler.SALATALAR, VeriTabanýSiparisler.TATLILAR,
			VeriTabanýSiparisler.TOPLAM };

	private int[] to = new int[] {
//			R.id.SiparisIdListItemTextView,
			R.id.KullaniciIdListItemTextView, R.id.YemekListItemTextView,
			R.id.IcecekListItemTextView, R.id.SalataListItemTextView,
			R.id.TatliListItemTextView, R.id.ToplamListItemTextView, };

	@Override
	protected void onCreate(Bundle savedInstanceState) {

		super.onCreate(savedInstanceState);
		setContentView(R.layout.siparisler);
		ekranKontrolleriniOlustur();
	}

	private void ekranKontrolleriniOlustur() {

		veritabaný = new VeriTabanýSiparisler(this);

		// Siparisleri Goruntulemek icin kullanýldý.
		kelimeListesiCursor = butunUrunleriSorgula();
		// adapter2 olusturuldu . kelimeListesiCursor cursor nesnesi ile
		// veritabanýndaki degerler adapter2'e set edildi
		adapter2 = new SimpleCursoradapter2Class2(this, R.layout.listtextviews2,
				kelimeListesiCursor, from, to, 0);

		// ListView Olusturuldu ve adapter2 set edildi.
		ListView SiparislerListView = (ListView) findViewById(R.id.SiparislerListView);
		SiparislerListView.setadapter2(adapter2);

		SiparislerListView.setOnItemClickListener(new OnItemClickListener() {
			

			public void onItemClick(adapter2View arg0, View view, int position,
					long id) {
				adapter2.setSelectedPosition(position);
			}
		});

	}

	// Butun siparisleri sorgulayýp onlarýn ListView'e düsmesini saglýyoruz.
	private Cursor butunUrunleriSorgula() {

		SQLiteDatabase db = veritabaný.getReadableDatabase();
		return db
				.rawQuery(
						"select SiparisId as _id,KullaniciId,Yemekler,Icecekler,Salatalar,Tatlilar,Toplam from siparisler",
						new String[] {});

		

	}

}
